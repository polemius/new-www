{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/introducing-slf4android","result":{"data":{"markdownRemark":{"html":"<p>Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really comes handy in such case is a detailed application log. That's why it's so important to take time to add useful log entries in every non trivial part of the codebase. At the very minimum you'll want to log any errors.</p>\n<h2>Logging frameworks</h2>\n<p>That's why it's so important to create log entries easily. The default solution that comes with Android by means of <a href=\"http://developer.android.com/reference/android/util/Log.html\"><code>Log</code></a> is the most commonly used. However for me it's really  the least pleasant to use:</p>\n<pre><code class=\"language-java\">Log.e(\"MyTag\", \"Failed to download \" + url +  \"due to occurred \" + ex);\n</code></pre>\n<p>I really don't like that I have to specify a tag each time I need to log something. Moreover having to concatenate strings seems tedious and error prone.</p>\n<h3>Logging with <code>java.util.logging</code></h3>\n<p>Another alternative that is available by default on android is packaged inside <code>java.util.logging.*</code>. And here's an example of how to use it:</p>\n<pre><code class=\"language-java\">    private static final Logger LOG = Logger.getLogger(MyActivity.class.getName());\n    // and then\n    LOG.log(Level.FINE, \"Starting activity {0} saved instance {1}\", new Object[]{this, savedInstanceState});\n</code></pre>\n<p>You're able to use <a href=\"http://developer.android.com/reference/java/text/MessageFormat.html\"><code>MessageFormatter</code></a> style to format log entries. However no variable arguments method overload makes it both harder to read and write. More importantly <strong>by default</strong> if you use above statement the message <strong>will not be printed anywhere</strong>. It's easy to <a href=\"http://stackoverflow.com/questions/4561345/how-to-configure-java-util-logging-on-android\">fix</a> when you know where to look for.</p>\n<h3>Powerful <code>logback</code></h3>\n<p><a href=\"http://logback.qos.ch/\">logback</a> is probably the most powerful and configurable logging framework. Among many features you can for example send an email with 50 last log entries - I've used it in one project, it can be a bit hard to configure but it really comes handy during testing. In order to use it on android one needs to use a ported version <a href=\"http://tony19.github.io/logback-android/\">logback-android</a>. There is one caveat though - this library is costs about 512kB - and takes about 4200 out of <a href=\"https://medium.com/@rotxed/dex-skys-the-limit-no-65k-methods-is-28e6cb40cf71\">dex method limit</a>.</p>\n<h3>Simple <a href=\"https://github.com/noveogroup/android-logger\">android-logger</a></h3>\n<p><code>android-logger</code> is a small (&#x3C;50KB) library that let's you use slf4j api to print to logcat. It ships with various configuration options that let you change the format of output messages as well as log level based on hierarchical logger names. However you won't be able to print messages to <a href=\"https://github.com/noveogroup/android-logger/issues/25\">an additional file</a> and you can only <a href=\"https://github.com/noveogroup/android-logger/issues/28\">configure the logger through properties files</a>.</p>\n<h2><a href=\"https://github.com/bright/slf4android\">slf4android</a></h2>\n<p>Since I wasn't perfectly happy with above and because some design decisions made in <a href=\"https://github.com/noveogroup/android-logger\">android-logger</a> make it not so easy to add features like logging to a file, creating custom patterns and configuring it from code I decided to create yet another logging utility.</p>\n<p>It's a tiny wrapper around <a href=\"http://www.slf4j.org/\">slf4j api</a> baked by the <code>java.util.logging</code> logger mechanism. This means you can easily hook in any existing <code>java.util.logging.Handler</code> implementations.</p>\n<p>To use this little gem you'll need to add <a href=\"http://bright.github.io/maven-repo/\"><code>http://bright.github.io/maven-repo/</code></a> to repository list:</p>\n<pre><code class=\"language-groovy\">repositories {\n    maven {\n        url \"http://bright.github.io/maven-repo/\"\n    }\n}\n</code></pre>\n<p>and then declare a dependency inside a module:</p>\n<pre><code class=\"language-groovy\">dependencies {\n    compile('pl.brightinventions:slf4android:0.0.4@aar'){\n      transitive = true\n    }\n    //other dependencies\n}\n</code></pre>\n<p>As with any slf4j compatible implementation using slf4android looks like this:</p>\n<pre><code class=\"language-java\">class HomeActivity extends Activity {\n    private static final Logger LOG = LoggerFactory.getLogger(HomeActivity.class.getSimpleName());\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        LOG.debug(\"Hello from {} saved instance state {}\", this, savedInstanceState);\n    }\n}\n</code></pre>\n<h3>Logging to a file</h3>\n<p>To print messages to a separate file just add:</p>\n<pre><code class=\"language-java\">LoggerConfiguration.configuration().addHandlerToLogger(\"\", LoggerConfiguration.fileLogHandler(this));\n</code></pre>\n<p>inside your custom <code>android.app.Application</code> <code>onCreate</code> method. This will create rotated log files inside <code>context.getApplicationInfo().dataDir</code> with a name derived from <code>context.getPackageName()</code> and a default message pattern <code>%date %level [%thread] %name - %message%newline</code></p>\n<h3>More features</h3>\n<p><code>slf4android</code> let's you register custom message patterns and configure logging level - although the api for that is still rough around the edges. It also features a simple (and not well tested) mechanism for error reporting that, when enabled, will display a <code>Dialog</code> prompting tester to notify developer through email whenever an error is encountered. You can enable it with:</p>\n<pre><code class=\"language-java\">LoggerConfiguration.configuration().notifyDeveloperWithLogcatDataHandler(applicationContext, \"developer.address@domain.com\")\n</code></pre>\n<p>and receive emails with attached logcat output which comes handy during development.</p>\n<p><em>This article is cross-posted with <a href=\"https://miensol.pl\">my personal blog</a></em></p>","excerpt":"Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really…","frontmatter":{"slug":null,"title":"Introducing slf4android - a simple slf4j implementation for android","description":null,"author":"piotr","tags":["android"],"date":"2014-11-01T00:00:00.000Z","image":null},"timeToRead":4,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2014-11-01-introducing-slf4android.md"},"allMarkdownRemark":{"nodes":[{"frontmatter":{"author_id":"adam","avatar":"/images/members/adam_bar.jpg","bio":"The Web Guy @ Bright Inventions","name":"Adam Bar","web":"https://whatwebcando.today"}},{"frontmatter":{"author_id":"agnieszka_h","avatar":"/images/members/agnieszka_h.jpg","bio":"Sales Manager @ Bright Inventions","name":"Agnieszka Hayashida","web":null}},{"frontmatter":{"author_id":"agnieszka","avatar":"/images/members/agnieszka_olszewska.jpg","bio":"Fullstack developer","name":"Agnieszka Olszewska","web":null}},{"frontmatter":{"author_id":"olo","avatar":"/images/members/aleksander_wielgorski.jpeg","bio":"Software Engineer @ Bright Inventions","name":"Aleksander Wielgórski","web":null}},{"frontmatter":{"author_id":"alisa","avatar":"/images/members/alisa_kashytska.jpg","bio":"Product designer","name":"Alisa Kashytska","web":null}},{"frontmatter":{"author_id":"azabost","avatar":"/images/members/andrzej_zabost.jpg","bio":"Senior Android developer","name":"Andrzej Zabost","web":"https://azabost.com"}},{"frontmatter":{"author_id":"arturs","avatar":"/images/members/artur.jpg","bio":"iOS developer","name":"Artur Suliński","web":null}},{"frontmatter":{"author_id":"bartek k","avatar":"/images/members/bartek_krzyzanski.jpg","bio":"Backend developer","name":"Bartek Krzyżański","web":null}},{"frontmatter":{"author_id":"bartekr","avatar":"/images/members/bartek.jpg","bio":"iOS developer","name":"Bartek Rozwarski","web":null}},{"frontmatter":{"author_id":"bartosz","avatar":"/images/members/bartosz_szafran.jpg","bio":"Senior Frontend Developer","name":"Bartosz Szafran","web":null}},{"frontmatter":{"author_id":"daniel","avatar":"/images/members/daniel_makurat.jpg","bio":"Co-founder & Senior Backend developer","name":"Daniel Makurat","web":null}},{"frontmatter":{"author_id":"eliasz","avatar":"/images/members/eliasz.png","bio":"Software Engineer @ Bright Inventions","name":"Eliasz Sawicki","web":"http://eluss.github.io/"}},{"frontmatter":{"author_id":"fjablonski","avatar":"/images/members/filip_jablonski.jpg","bio":"Senior iOS developer","name":"Filip Jabłoński","web":null}},{"frontmatter":{"author_id":"grzesiek","avatar":"/images/members/grzegorz_ciesla.jpg","bio":"Software Developer","name":"Grzegorz Cieśla","web":null}},{"frontmatter":{"author_id":"ivan","avatar":"/images/members/ivan.jpg","bio":"Fullstack developer","name":"Ivan Menshykov","web":null}},{"frontmatter":{"author_id":"janek","avatar":"/images/members/janhanc.jpg","bio":"Frontend developer","name":"Jan Hanc","web":null}},{"frontmatter":{"author_id":"kwysocki","avatar":"/images/members/kamil.png","bio":"Software Engineer @ Bright Inventions","name":"Kamil Wysocki","web":"https://wysockikamil.com"}},{"frontmatter":{"author_id":"karoln","avatar":"/images/members/karol_nadratowski.jpg","bio":null,"name":"Karol Nadratowski","web":null}},{"frontmatter":{"author_id":"karol r","avatar":"/images/members/karol_rinc.jpg","bio":"Backend developer","name":"Karol Rinc","web":null}},{"frontmatter":{"author_id":"kasia","avatar":"/images/members/kasia_lukasiewicz.jpg","bio":"Senior Project Manager","name":"Kasia Łukasiewicz","web":null}},{"frontmatter":{"author_id":"kasia g","avatar":"/images/members/katarzyna_galka.jpg","bio":"Project manager","name":"Katarzyna Gałka","web":null}},{"frontmatter":{"author_id":"krzysiek h","avatar":"/images/members/krzysztof_hinc.jpg","bio":"Web developer","name":"Krzysiek Hinc","web":null}},{"frontmatter":{"author_id":"krzysiek","avatar":"/images/members/krzysztof_kaczmarek.jpg","bio":"Senior iOS Developer","name":"Krzysztof Kaczmarek","web":null}},{"frontmatter":{"author_id":"maciej","avatar":"/images/members/maciej_seleman.jpg","bio":"QA Specialist","name":"Maciej Seleman","web":null}},{"frontmatter":{"author_id":"magda","avatar":"/images/members/magda_sadowska.jpg","bio":"Office & HR Assistant","name":"Magda Sadowska","web":null}},{"frontmatter":{"author_id":"maja","avatar":"/images/members/maja_puta.jpg","bio":"Junior QA Specialist","name":"Maja Puta","web":null}},{"frontmatter":{"author_id":"marcink","avatar":"/images/members/marcin_kwiatkowski.jpg","bio":null,"name":"Marcin Kwiatkowski","web":null}},{"frontmatter":{"author_id":"mateusz","avatar":"/images/members/mateusz_klimczak.jpg","bio":"Technical leader & Project manager","name":"Mateusz Klimczak","web":null}},{"frontmatter":{"author_id":"mateuszklimek","avatar":"/images/members/mateuszklimek.png","bio":"Software Engineer @ Bright Inventions","name":"Mateusz Klimek","web":null}},{"frontmatter":{"author_id":"michal k","avatar":"/images/members/michal_koszalka.jpg","bio":"Senior Backend developer","name":"Michał Koszałka","web":null}},{"frontmatter":{"author_id":"michał","avatar":"/images/members/michal_wrobel.jpg","bio":"Senior Backend Developer at Bright Inventions","name":"Michał Wróbel","web":null}},{"frontmatter":{"author_id":"michal","avatar":"/images/members/michał_łukasiewicz.jpg","bio":"Co-founder & Senior iOS developer","name":"Michał Łukasiewicz","web":null}},{"frontmatter":{"author_id":"monika","avatar":"/images/members/monika.jpg","bio":"Software Developer @ Bright Inventions","name":"Monika Niegrzybowska","web":null}},{"frontmatter":{"author_id":"nikodem","avatar":"/images/members/nikodem_kalinowski.jpg","bio":"Web developer","name":"Nikodem Kalinowski","web":null}},{"frontmatter":{"author_id":"patryk","avatar":"/images/members/patryk_huzarski.jpg","bio":"Software Developer @ Bright Inventions","name":"Patryk Huzarski","web":null}},{"frontmatter":{"author_id":"patryk sz","avatar":"/images/members/patryk_szlagowski.jpg","bio":"Senior Backend developer","name":"Patryk Szlagowski","web":null}},{"frontmatter":{"author_id":"paweł","avatar":"/images/members/paweł_gutkowski.jpg","bio":"Fullstack Developer at Bright Inventions ","name":"Paweł Gutkowski","web":null}},{"frontmatter":{"author_id":"pawel","avatar":"/images/members/paweł_papkiewicz.jpg","bio":"Fullstack developer","name":"Paweł Papkiewicz","web":null}},{"frontmatter":{"author_id":"piotr","avatar":"/images/members/piotr_mionskowski.jpg","bio":"TDD fan eager to learn new things","name":"Piotr Mionskowski","web":"https://miensol.pl"}},{"frontmatter":{"author_id":"piotr_l","avatar":"/images/members/piotrl.png","bio":"Android Developer @ Bright Inventions","name":"Piotr Łupiński","web":"http://exp.flamaster2.com"}},{"frontmatter":{"author_id":"radek","avatar":"/images/members/radek_pieczątkiewicz.jpg","bio":"Android developer","name":"Radek Pieczątkiewicz","web":null}},{"frontmatter":{"author_id":"radeks","avatar":"/images/members/radoslaw.jpg","bio":"Software Engineer @ Bright Inventions","name":"Radosław Słowiński","web":null}},{"frontmatter":{"author_id":"rafal h","avatar":"/images/members/rafal_hoffman.jpg","bio":"Fullstack developer","name":"Rafał Hofman","web":null}},{"frontmatter":{"author_id":"sebastian","avatar":"/images/members/sebastian_sobczak.jpg","bio":"Junior Account Manager at Bright Inventions ","name":"Sebastian Sobczak","web":null}},{"frontmatter":{"author_id":"szymek","avatar":"/images/members/szymon_miloch.jpg","bio":"Android & Web developer","name":"Szymon Miloch","web":null}},{"frontmatter":{"author_id":"tomek","avatar":"/images/members/tomek.jpeg","bio":null,"name":"Tomasz Gęsior","web":null}},{"frontmatter":{"author_id":"ula","avatar":"/images/members/ula_stankiewicz.jpg","bio":"HR & Marketing Manager","name":"Ula Stankiewicz","web":null}},{"frontmatter":{"author_id":"wojciech","avatar":"/images/members/wojciech_baczyński.jpg","bio":"Fullstack developer","name":"Wojciech Baczyński","web":null}},{"frontmatter":{"author_id":"lukasz","avatar":"/images/members/lukasz_reszetow.jpg","bio":"Android developer","name":"Łukasz Reszetow","web":null}}]},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2014-11-01-introducing-slf4android.md"}}}