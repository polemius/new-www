{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/ios-layouts-for-web-developers-3-managing-appearance","result":{"data":{"markdownRemark":{"html":"<p>This is the third part of the <a href=\"/blog/ios-layouts-for-web-developers/\"><strong>iOS layouts for web developers</strong> series</a>. The <a href=\"/blog/ios-layouts-for-web-developers-1-basic-building-blocks/\">first part was about the controls</a>, the <a href=\"/blog/ios-layouts-for-web-developers-2-control-positioning/\">second about its positioning</a>. Now I’m going to tackle how to approach managing the controls appearance - something that we have CSS for in the web.</p>\n<h2>CSS equivalent?</h2>\n<p>CSS was first standardised back in 1996, it was around early 2000s when it became ubiquitous. We've then left behind the times when the <code>&#x3C;center></code> tag was used to align content and view specific definitions like fonts or colors were scattered all over through the HTML structure. For almost two decades, we clearly feel it wasn’t the good way of doing things and we now strive to maintain the separation of structure vs. presentation. CSS is now an inseparable part of the web development, there’s virtually no way to do anything without it. It’s like a skin for the human body, we don’t rather meet anyone without one and even if we meet, we’d probably be frightened and disgusted by the raw and bloody flesh visible.</p>\n<p>Now, it’s 2015 and we’re looking at the iOS layouts. How do we maintain the content vs. presentation separation in iOS? The short answer is - we don’t. There is no direct replacement for CSS concept in iOS. I was seriously shocked when I first learned that fact. But the fact is, a lot of iOS community <a href=\"http://stackoverflow.com/questions/2767512/good-reasons-why-to-not-use-xib-files?rq=1\">doesn’t care</a>. Most iOS developers go <a href=\"http://www.techrepublic.com/blog/software-engineer/getting-started-with-ios-views-and-view-controllers-part-1/\">“the Apple way”</a> here and use <a href=\"https://developer.apple.com/xcode/interface-builder/\">Interface Builder</a> to design the layout. They define the whole presentation layer by clicking and dragging, not even feeling the need of any code for that purpose.</p>\n<blockquote>\n<p>content vs. presentation separation and styles reuse using CSS &#x3C;—> N/A</p>\n</blockquote>\n<p>One might say that less code means less bugs, but of course, Interface Builder does nothing different than generating the code underneath. It’s in <a href=\"http://www.monobjc.net/xib-file-format.html\">XIB format</a>, nothing easily “consumable” by anything other than its native generator. Trying to touch it from the outside <a href=\"http://stackoverflow.com/questions/1660606/is-it-possible-to-directly-edit-the-xml-of-xib-files\">will probably hurt</a>. Working with the code generator like Interface Builder <a href=\"http://blog.teamtreehouse.com/why-i-dont-use-interface-builder\">can often encourage bad practices</a> - it creates tight coupling between view and it’s logic behind, it creates merge hell when touched by more than one person, it destroys the ability to reuse style definitions and the relation between what we did in the IDE and what we got in the final app is too implicit.</p>\n<p>Also, maybe it’s only my personal delusion, but I think we in the web world feel a lot of disgust for WYSIWYGs in general and often even for using the mouse at all. CSS is not an imperative programming language (fortunately), but it’s still the code. We treat it as such, we edit it as a raw text files, we understand it and we feel comfortable with that fact. Whenever something automated messes with my CSS or HTML, I’m losing the confidence in what’s going on and how it works.</p>\n<h2>How to handle style definitions then?</h2>\n<p>When we decide not to go “the Apple way” and abandon Interface Builder striving for something that allows style definitions reuse and separation, our simplest alternative is to <a href=\"https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW36\">create everything directly in the code</a>, instantiating the controls “manually\", setting its properties like colors, setting its frame or Auto Layout constraints and finally adding it to the superview, like this:</p>\n<pre><code class=\"language-Objective-C\">- (void)loadView {\n    [super loadView];\n\n    UILabel *testView = [UILabel new];\n    testView.backgroundColor = [UIColor redColor];\n    testView.font = [UIFont boldSystemFontOfSize:24];\n    testView.text = @\"test\";\n    testView.translatesAutoresizingMaskIntoConstraints = NO;\n\n    [self.view addSubview:testView];\n    [testView sizeToFit];\n\n    [self.view addConstraint:[NSLayoutConstraint constraintWithItem:testView\n                                        attribute:NSLayoutAttributeTopMargin\n                                        relatedBy:NSLayoutRelationEqual\n                                           toItem:self.view\n                                        attribute:NSLayoutAttributeTopMargin\n                                       multiplier:1\n                                         constant:20]];\n    [self.view addConstraint:[NSLayoutConstraint constraintWithItem:testView\n                                        attribute:NSLayoutAttributeLeading\n                                        relatedBy:NSLayoutRelationEqual\n                                           toItem:self.view\n                                        attribute:NSLayoutAttributeLeading\n                                       multiplier:1\n                                         constant:20]];\n}\n</code></pre>\n<p>For complex screens, it quickly grows to hundreds of lines of imperative and repetitive code that is inherently very declarative in its real nature. It hurts me every time I assign properties like <code>font</code> and <code>backgroundColor</code> etc. It feels just like I’d be putting <code>&#x3C;font face=“Arial” color=“red”></code> in my HTML markup and it’s already more than 10 years ago when I did so the last time. It’s like that human flesh visible outside.</p>\n<p>One simple strategy we can employ is to enclose our repeatable patterns of style and layout definitions, very remotely equivalent to our CSS classes, as a static method somewhere or as <a href=\"https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html\">a category on <code>UIView</code></a>:</p>\n<pre><code class=\"language-Objective-C\">@implementation UILabel (Layout)\n\n+ (UILabel *)bigRedLabel {\n    UILabel *label = [UILabel new];\n    label.backgroundColor = [UIColor redColor];\n    label.font = [UIFont boldSystemFontOfSize:24];\n    return label;\n}\n\n- (void)placeInTopLeftCornerOf:(UIView *)parentView {\n    self.translatesAutoresizingMaskIntoConstraints = NO;\n    [self sizeToFit];\n\n    [parentView addConstraint:[NSLayoutConstraint constraintWithItem:self\n                                        attribute:NSLayoutAttributeTopMargin\n                                        relatedBy:NSLayoutRelationEqual\n                                           toItem:parentView\n                                        attribute:NSLayoutAttributeTopMargin\n                                       multiplier:1\n                                         constant:20]];\n    [parentView addConstraint:[NSLayoutConstraint constraintWithItem:self\n                                        attribute:NSLayoutAttributeLeading\n                                        relatedBy:NSLayoutRelationEqual\n                                           toItem:parentView\n                                        attribute:NSLayoutAttributeLeading\n                                       multiplier:1\n                                         constant:20]];\n}\n\n@end\n</code></pre>\n<p>Now we can use it whenever we want our new control to look like the other:</p>\n<pre><code class=\"language-Objective-C\">- (void)loadView {\n    [super loadView];\n\n    UILabel *testView = [UILabel bigRedLabel];\n    testView.text = @\"test\";\n\n    [self.view addSubview:testView];\n    [testView placeInTopLeftCornerOf:self.view];\n}\n</code></pre>\n<h2>Apple proposal - appearance proxies</h2>\n<p>The issue of style definitions reuse was also approached by Apple within UIKit, albeit quite differently than in CSS. There’s a concept called <a href=\"http://nshipster.com/uiappearance/\">appearance</a>. It allows us to define selected style properties of the controls once per the application, ensuring any customization we do is applied consistently across the app. We can define that all the buttons (<code>UIButton</code> instances) that we use in our app should have gray background:</p>\n<pre><code class=\"language-Objective-C\">[UIButton appearance].backgroundColor = [UIColor grayColor];\n</code></pre>\n<p>We can restrict our customization scope to controls contained within another specific container control, for example to all <code>UIBarButtonItem</code>s within <code>UIToolbar</code>:</p>\n<pre><code class=\"language-Objective-C\">[UIBarButtonItem appearanceWhenContainedIn:[UIToolbar class], nil]\n    .tintColor = [UIColor blackColor];\n</code></pre>\n<p>Also, we can optionally make our appearance definitions dependent on the screen dimensions and orientations, using <code>UITraitCollection</code>s we’ve discussed <a href=\"/ios-layouts-for-web-developers-2-control-positioning/#the-real-responsiveness?\">in the previous part of the series</a>:</p>\n<pre><code class=\"language-Objective-C\">UITraitCollection *traitCollection = [UITraitCollection\n    traitCollectionWithHorizontalSizeClass:UIUserInterfaceSizeClassCompact];\n[UIImageView appearanceForTraitCollection:traitCollection]\n    .tintColor = [UIColor redColor];\n</code></pre>\n<p>Appearance might be compared to CSS limited to elements only (no per-class or per-id definitions), with basic hierarchies and basic media queries support. However, the distance to the full-blown CSS equivalent is quite large. There is no way to apply appearance definitions to the selected subset of elements of a given type, like we do using CSS classes. There is no way to represent other types of relationships between controls than ancestor-descendant (<code>whenContainedIn</code>) - we need to forget about the selectors we know from CSS like siblings, direct children, n-th of type and so on. Moreover, when we have multiple ancestor-descendant relationships defined, <a href=\"https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAppearance_Protocol/\">the first one encountered (most generic) is used</a>, while in CSS the most specific one is used, allowing us to specify our styles from the general definitions to the specialized ones going down the elements tree.</p>\n<blockquote>\n<p>CSS definitions on HTML elements &#x3C;—> <a href=\"https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/UIKitUICatalog/.html#//apple_ref/doc/uid/TP40012857-UIView-SW16\">UIAppearance</a> definitions</p>\n</blockquote>\n<blockquote>\n<p>CSS definitions on HTML element hierarchies &#x3C;—> UIAppearance definitions with <code>whenContainedIn</code> overloads; limited</p>\n</blockquote>\n<blockquote>\n<p>CSS definitions with screen size-related media queries &#x3C;—> UIAppearance definitions with <code>forTraitCollection</code> overloads; limited</p>\n</blockquote>\n<blockquote>\n<p>CSS features other than above &#x3C;—> N/A</p>\n</blockquote>\n<p>Last but not least, customization via appearance is by default limited only to <a href=\"https://gist.github.com/mattt/5135521\">several properties of the controls</a> exposed by iOS with the <code>UI_APPEARANCE_SELECTOR</code> tag. For example, generic <code>UIView</code> only allows us to set <code>backgroundColor</code> through appearance and such a common control like <code>UILabel</code> doesn’t add anything more on its own. This means there is no out-of-the-box solution for setting text color, font properties, margins etc. for all the labels once across the application. That limitation can be overcome by defining an <code>UI_APPEARANCE_SELECTOR</code> <a href=\"http://timross.info/blog/2013/03/26/more-fun-with-uiappearance/\">for custom properties</a> and <a href=\"http://petersteinberger.com/blog/2013/uiappearance-for-custom-views/\">for custom controls</a>, but that is far from the elegance of plain old declarative CSS.</p>\n<h2>Prospects for truly declarative solution</h2>\n<p>There are multiple projects out there in the open source space that aims to bring the real declarativeness, style reuse possibility and overall CSS feel to iOS views. Both <a href=\"https://github.com/robertwijas/UISS\">UISS</a> and <a href=\"https://github.com/tombenner/nui\">NUI</a> offer the syntax loosely inspired by CSS. The former is just a wrapper for UIAppearance with all its limitations. The latter goes much further, actually taking care of virtually all the styling exposed by UIKit controls. There are also <a href=\"http://pixate.github.io/pixate-freestyle-ios/\">Pixate Freestyle</a> and <a href=\"http://nativecss.com/\">nativeCSS</a> that offer direct usage of CSS within iOS apps. In Bright we’re also doing some in-house experiments in <a href=\"https://github.com/bright/Cero\">Cero</a>, albeit it aims more to provide the declarative view hierarchy and the styling comes a bit as a side effect.</p>\n<p>The most advanced solutions that features declarative and reusable styles are probably offered by the cross-platform frameworks that originate from the web. These frameworks promise the web developers a way to reuse some of our JavaScript, HTML and CSS skills directly on mobile platforms to produce native or semi-native experiences. Users of the platforms that employ HTML directly as a language to define apps views, like <a href=\"http://coenraets.org/blog/phonegap-tutorial/\">PhoneGap/Cordova</a>, <a href=\"http://ionicframework.com/docs/components/\">Ionic</a> or <a href=\"http://www.idangero.us/framework7/\">Framework7</a> immediately benefit from having the real power of CSS available. Of course it comes with the penalty of being a thick and often limited or leaky abstraction.</p>\n<p>On the other side there are frameworks that offer their own abstractions on views and styles. The one that <a href=\"http://www.objc.io/issue-22/facebook.html\">seems quite interesting</a> is <a href=\"https://github.com/facebook/componentkit\">ComponentKit by Facebook</a>. It redefines the views in terms of components with declarative and composable API and <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes\">flexbox</a>-enabled styling. One more example can’t be missed here - there is a lot of buzz around recently released <a href=\"http://jlongster.com/First-Impressions-using-React-Native\">React Native</a> framework that offers its own approach of using JavaScript (and JSX known from <a href=\"https://facebook.github.io/react/\">React.js</a>) natively in iOS. With the power of JavaScript we’re familiar with, we can shape and reuse our presentation code in a more elegant way. React Native uses a <a href=\"http://facebook.github.io/react-native/docs/style.html#content\">lightweight version of CSS</a> that offers features like <a href=\"https://facebook.github.io/react-native/docs/style.html#content\">composition</a> and <a href=\"https://facebook.github.io/react-native/docs/flexbox.html\">flexbox</a>.</p>\n<p>I believe that all of these ideas and frameworks are shaping the future of iOS layouts and are worth keeping an eye on it with the hope that someday the native offering of iOS platform in terms of managing the appearance would not be so limited as today.</p>\n<p>Next time - more on <a href=\"/blog/ios-layouts-for-web-developers-4-css-properties-replacements/\">how to achieve particular visual effects known from CSS within iOS views</a>.</p>","excerpt":"This is the third part of the iOS layouts for web developers series. The first part was about the controls, the second about its positioning…","frontmatter":{"slug":null,"title":"iOS layouts for web developers #3 - managing the appearance","description":null,"author":"adam","tags":["iOS"],"date":"2015-04-03T00:00:00.000Z","image":null},"timeToRead":9,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-04-03-ios-layouts-for-web-developers-3-managing-appearance.md"},"allMarkdownRemark":{"nodes":[{"frontmatter":{"author_id":"adam","avatar":"/images/members/adam_bar.jpg","bio":"The Web Guy @ Bright Inventions","name":"Adam Bar","web":"https://whatwebcando.today"}},{"frontmatter":{"author_id":"agnieszka_h","avatar":"/images/members/agnieszka_h.jpg","bio":"Sales Manager @ Bright Inventions","name":"Agnieszka Hayashida","web":null}},{"frontmatter":{"author_id":"agnieszka","avatar":"/images/members/agnieszka_olszewska.jpg","bio":"Fullstack developer","name":"Agnieszka Olszewska","web":null}},{"frontmatter":{"author_id":"olo","avatar":"/images/members/aleksander_wielgorski.jpeg","bio":"Software Engineer @ Bright Inventions","name":"Aleksander Wielgórski","web":null}},{"frontmatter":{"author_id":"alisa","avatar":"/images/members/alisa_kashytska.jpg","bio":"Product designer","name":"Alisa Kashytska","web":null}},{"frontmatter":{"author_id":"azabost","avatar":"/images/members/andrzej_zabost.jpg","bio":"Senior Android developer","name":"Andrzej Zabost","web":"https://azabost.com"}},{"frontmatter":{"author_id":"arturs","avatar":"/images/members/artur.jpg","bio":"iOS developer","name":"Artur Suliński","web":null}},{"frontmatter":{"author_id":"bartek k","avatar":"/images/members/bartek_krzyzanski.jpg","bio":"Backend developer","name":"Bartek Krzyżański","web":null}},{"frontmatter":{"author_id":"bartekr","avatar":"/images/members/bartek.jpg","bio":"iOS developer","name":"Bartek Rozwarski","web":null}},{"frontmatter":{"author_id":"bartosz","avatar":"/images/members/bartosz_szafran.jpg","bio":"Senior Frontend Developer","name":"Bartosz Szafran","web":null}},{"frontmatter":{"author_id":"daniel","avatar":"/images/members/daniel_makurat.jpg","bio":"Co-founder & Senior Backend developer","name":"Daniel Makurat","web":null}},{"frontmatter":{"author_id":"eliasz","avatar":"/images/members/eliasz.png","bio":"Software Engineer @ Bright Inventions","name":"Eliasz Sawicki","web":"http://eluss.github.io/"}},{"frontmatter":{"author_id":"fjablonski","avatar":"/images/members/filip_jablonski.jpg","bio":"Senior iOS developer","name":"Filip Jabłoński","web":null}},{"frontmatter":{"author_id":"grzesiek","avatar":"/images/members/grzegorz_ciesla.jpg","bio":"Software Developer","name":"Grzegorz Cieśla","web":null}},{"frontmatter":{"author_id":"ivan","avatar":"/images/members/ivan.jpg","bio":"Fullstack developer","name":"Ivan Menshykov","web":null}},{"frontmatter":{"author_id":"janek","avatar":"/images/members/janhanc.jpg","bio":"Frontend developer","name":"Jan Hanc","web":null}},{"frontmatter":{"author_id":"kwysocki","avatar":"/images/members/kamil.png","bio":"Software Engineer @ Bright Inventions","name":"Kamil Wysocki","web":"https://wysockikamil.com"}},{"frontmatter":{"author_id":"karoln","avatar":"/images/members/karol_nadratowski.jpg","bio":null,"name":"Karol Nadratowski","web":null}},{"frontmatter":{"author_id":"karol r","avatar":"/images/members/karol_rinc.jpg","bio":"Backend developer","name":"Karol Rinc","web":null}},{"frontmatter":{"author_id":"kasia","avatar":"/images/members/kasia_lukasiewicz.jpg","bio":"Senior Project Manager","name":"Kasia Łukasiewicz","web":null}},{"frontmatter":{"author_id":"kasia g","avatar":"/images/members/katarzyna_galka.jpg","bio":"Project manager","name":"Katarzyna Gałka","web":null}},{"frontmatter":{"author_id":"krzysiek h","avatar":"/images/members/krzysztof_hinc.jpg","bio":"Web developer","name":"Krzysiek Hinc","web":null}},{"frontmatter":{"author_id":"krzysiek","avatar":"/images/members/krzysztof_kaczmarek.jpg","bio":"Senior iOS Developer","name":"Krzysztof Kaczmarek","web":null}},{"frontmatter":{"author_id":"maciej","avatar":"/images/members/maciej_seleman.jpg","bio":"QA Specialist","name":"Maciej Seleman","web":null}},{"frontmatter":{"author_id":"magda","avatar":"/images/members/magda_sadowska.jpg","bio":"Office & HR Assistant","name":"Magda Sadowska","web":null}},{"frontmatter":{"author_id":"maja","avatar":"/images/members/maja_puta.jpg","bio":"Junior QA Specialist","name":"Maja Puta","web":null}},{"frontmatter":{"author_id":"marcink","avatar":"/images/members/marcin_kwiatkowski.jpg","bio":null,"name":"Marcin Kwiatkowski","web":null}},{"frontmatter":{"author_id":"mateusz","avatar":"/images/members/mateusz_klimczak.jpg","bio":"Technical leader & Project manager","name":"Mateusz Klimczak","web":null}},{"frontmatter":{"author_id":"mateuszklimek","avatar":"/images/members/mateuszklimek.png","bio":"Software Engineer @ Bright Inventions","name":"Mateusz Klimek","web":null}},{"frontmatter":{"author_id":"michal k","avatar":"/images/members/michal_koszalka.jpg","bio":"Senior Backend developer","name":"Michał Koszałka","web":null}},{"frontmatter":{"author_id":"michał","avatar":"/images/members/michal_wrobel.jpg","bio":"Senior Backend Developer at Bright Inventions","name":"Michał Wróbel","web":null}},{"frontmatter":{"author_id":"michal","avatar":"/images/members/michał_łukasiewicz.jpg","bio":"Co-founder & Senior iOS developer","name":"Michał Łukasiewicz","web":null}},{"frontmatter":{"author_id":"monika","avatar":"/images/members/monika.jpg","bio":"Software Developer @ Bright Inventions","name":"Monika Niegrzybowska","web":null}},{"frontmatter":{"author_id":"nikodem","avatar":"/images/members/nikodem_kalinowski.jpg","bio":"Web developer","name":"Nikodem Kalinowski","web":null}},{"frontmatter":{"author_id":"patryk","avatar":"/images/members/patryk_huzarski.jpg","bio":"Software Developer @ Bright Inventions","name":"Patryk Huzarski","web":null}},{"frontmatter":{"author_id":"patryk sz","avatar":"/images/members/patryk_szlagowski.jpg","bio":"Senior Backend developer","name":"Patryk Szlagowski","web":null}},{"frontmatter":{"author_id":"paweł","avatar":"/images/members/paweł_gutkowski.jpg","bio":"Fullstack Developer at Bright Inventions ","name":"Paweł Gutkowski","web":null}},{"frontmatter":{"author_id":"pawel","avatar":"/images/members/paweł_papkiewicz.jpg","bio":"Fullstack developer","name":"Paweł Papkiewicz","web":null}},{"frontmatter":{"author_id":"piotr","avatar":"/images/members/piotr_mionskowski.jpg","bio":"TDD fan eager to learn new things","name":"Piotr Mionskowski","web":"https://miensol.pl"}},{"frontmatter":{"author_id":"piotr_l","avatar":"/images/members/piotrl.png","bio":"Android Developer @ Bright Inventions","name":"Piotr Łupiński","web":"http://exp.flamaster2.com"}},{"frontmatter":{"author_id":"radek","avatar":"/images/members/radek_pieczątkiewicz.jpg","bio":"Android developer","name":"Radek Pieczątkiewicz","web":null}},{"frontmatter":{"author_id":"radeks","avatar":"/images/members/radoslaw.jpg","bio":"Software Engineer @ Bright Inventions","name":"Radosław Słowiński","web":null}},{"frontmatter":{"author_id":"rafal h","avatar":"/images/members/rafal_hoffman.jpg","bio":"Fullstack developer","name":"Rafał Hofman","web":null}},{"frontmatter":{"author_id":"sebastian","avatar":"/images/members/sebastian_sobczak.jpg","bio":"Junior Account Manager at Bright Inventions ","name":"Sebastian Sobczak","web":null}},{"frontmatter":{"author_id":"szymek","avatar":"/images/members/szymon_miloch.jpg","bio":"Android & Web developer","name":"Szymon Miloch","web":null}},{"frontmatter":{"author_id":"tomek","avatar":"/images/members/tomek.jpeg","bio":null,"name":"Tomasz Gęsior","web":null}},{"frontmatter":{"author_id":"ula","avatar":"/images/members/ula_stankiewicz.jpg","bio":"HR & Marketing Manager","name":"Ula Stankiewicz","web":null}},{"frontmatter":{"author_id":"wojciech","avatar":"/images/members/wojciech_baczyński.jpg","bio":"Fullstack developer","name":"Wojciech Baczyński","web":null}},{"frontmatter":{"author_id":"lukasz","avatar":"/images/members/lukasz_reszetow.jpg","bio":"Android developer","name":"Łukasz Reszetow","web":null}}]},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-04-03-ios-layouts-for-web-developers-3-managing-appearance.md"}}}