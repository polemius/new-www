{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/typescript-tips-from-kotlin-developer-const","result":{"data":{"markdownRemark":{"html":"<p>Nowadays I mostly code in <a href=\"https://kotlinlang.org/\">Kotlin programming language</a>. I got interested in it when I started working on a Java 7 codebase and quickly got fed up with the language. At <a href=\"https://brightinventions.pl\">Bright Inventions</a> we often use TypeScript for both back-end, front-end and mobile development so I thought I would share some thoughts and tips for TypeScript learned while using Kotlin. In particular this post is about constant variables.</p>\n<h2>Use <code>const</code> whenever possible</h2>\n<p><a href=\"https://hackernoon.com/5-benefits-of-immutable-objects-worth-considering-for-your-next-project-f98e7e85b6ac\">Using immutable variables</a> aids reasoning about the flow and state of a program. It helps compiler to provide more intelligent hints especially while dealing with nullable types.</p>\n<p>In Kotlin a <code>val</code> keyword denotes a variable which value does not change after initialization e.g.:</p>\n<pre><code class=\"language-kotlin\">val x: Int\nval y = 3\nx = 2\nx = 20 // Error: Val cannot be reassigned\ny = 30 // Error: Val cannot be reassigned\n</code></pre>\n<p>In <a href=\"https://www.typescriptlang.org/\">TypeScript</a> such a situation is handled with <code>const</code>:</p>\n<pre><code class=\"language-typescript\">const x: number // Error: 'const' declarations must be initialized\nconst y: number = 3\n\ny = 30 // Error: Cannot assign to 'y' because it is constant or read-only property\n</code></pre>\n<h2>Compilers love <code>const</code></h2>\n<p>The first way in which the compiler gets smarter when we use <code>const</code> are null checks. When you enable <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\"><code>strictNullChecks</code></a>, which you should, both Kotlin and TypeScript compiler understand if something can or cannot be null.</p>\n<pre><code class=\"language-typescript\">const firstName: string | null = getFirstName()\nlet lastName: string | null = getLastName()\n\nif (firstName !== null &#x26;&#x26; lastName !== null) {\n    setTimeout(() => {\n        console.log(firstName.length)\n        console.log(lastName.length) // Error: Object is possibly 'null'\n    })\n}\n</code></pre>\n<p>In the first 2 lines we declare <code>firstName</code> and <code>lastName</code> as holding <code>string</code> or <code>null</code>. The variables are initialized with the helper functions <code>getFirstName</code> and <code>getLastName</code>. After we check that <code>firstName</code> and <code>lastName</code> are <strong>definitely not null</strong> we fire some async function. We can safely use <code>firstName.length</code>. However, when we use <code>lastName.length</code> the compiler complains with <code>Object is possibly 'null'</code> error. This is because it is possible that in between the null check and the <code>console.log</code> statement <em>something</em> could change the <code>lastName</code> value. We might know that this is not true just by looking at the code. The compiler however, cannot be 100% sure in all cases. Thankfully we have <code>const</code> and we can share our knowledge with the compiler.</p>\n<h2>Compilers catch bugs with <code>const</code></h2>\n<p>Because <code>const</code> and <code>val</code> can only be assigned once, compilers can prevent another class of bugs. Take a look at the code example blow. There is a bug üêõ that could easily be avoided had we used <code>const</code> instead of <code>let</code>.</p>\n<pre><code class=\"language-typescript\">let firstName: string = person.firstName\nlet lastName: string = person.lastName\n\nconst parsed = parseFormData((data: {name: string }) => {\n    let first: string | null, last: string | null\n    let parts = data.name.split(' ')\n    lastName = parts[0]\n    firstName = parts[1]\n    return { firstName: first, lastName: last }\n})\n\nif (parsed.firstName !== firstName || parsed.lastName !== lastName) { \n    // submit changes\n}\n</code></pre>\n<p>You may have spotted the bug. Chances are though, especially if you are like me, that after long hours when the coffee level in your blood drops substantially below the required level, it will take long minutes to figure out the cause. There is a very easy remedy though. With <code>firstName</code> and <code>lastName</code> declared as constant variables the compiler catches bugs for us:</p>\n<pre><code class=\"language-typescript\">lastName = parts[0] // Error: Cannot assign 'lastName' because it is a constant or a read-only property\nfirstName = parts[1] // Error: Cannot assign 'firstName' because it is a constant or a read-only property\n</code></pre>","excerpt":"Nowadays I mostly code in Kotlin programming language. I got interested in it when I started working on a Java 7 codebase and quickly got‚Ä¶","frontmatter":{"slug":null,"title":"TypeScript tips from Kotlin developer - const","description":null,"author":"piotr","tags":["TypeScript","Kotlin","const","immutability"],"date":"2018-04-10T22:00:00.000Z","image":"/images/kotlin/kotlin-logo.png"},"timeToRead":3,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-04-11-typescript-tips-from-kotlin-developer-const.md"},"allMarkdownRemark":{"nodes":[{"frontmatter":{"author_id":"adam","avatar":"/images/members/adam_bar.jpg","bio":"The Web Guy @ Bright Inventions","name":"Adam Bar","web":"https://whatwebcando.today"}},{"frontmatter":{"author_id":"agnieszka_h","avatar":"/images/members/agnieszka_h.jpg","bio":"Sales Manager @ Bright Inventions","name":"Agnieszka Hayashida","web":null}},{"frontmatter":{"author_id":"agnieszka","avatar":"/images/members/agnieszka_olszewska.jpg","bio":"Fullstack developer","name":"Agnieszka Olszewska","web":null}},{"frontmatter":{"author_id":"olo","avatar":"/images/members/aleksander_wielgorski.jpeg","bio":"Software Engineer @ Bright Inventions","name":"Aleksander Wielg√≥rski","web":null}},{"frontmatter":{"author_id":"alisa","avatar":"/images/members/alisa_kashytska.jpg","bio":"Product designer","name":"Alisa Kashytska","web":null}},{"frontmatter":{"author_id":"azabost","avatar":"/images/members/andrzej_zabost.jpg","bio":"Senior Android developer","name":"Andrzej Zabost","web":"https://azabost.com"}},{"frontmatter":{"author_id":"arturs","avatar":"/images/members/artur.jpg","bio":"iOS developer","name":"Artur Suli≈Ñski","web":null}},{"frontmatter":{"author_id":"bartek k","avatar":"/images/members/bartek_krzyzanski.jpg","bio":"Backend developer","name":"Bartek Krzy≈ºa≈Ñski","web":null}},{"frontmatter":{"author_id":"bartekr","avatar":"/images/members/bartek.jpg","bio":"iOS developer","name":"Bartek Rozwarski","web":null}},{"frontmatter":{"author_id":"bartosz","avatar":"/images/members/bartosz_szafran.jpg","bio":"Senior Frontend Developer","name":"Bartosz Szafran","web":null}},{"frontmatter":{"author_id":"daniel","avatar":"/images/members/daniel_makurat.jpg","bio":"Co-founder & Senior Backend developer","name":"Daniel Makurat","web":null}},{"frontmatter":{"author_id":"eliasz","avatar":"/images/members/eliasz.png","bio":"Software Engineer @ Bright Inventions","name":"Eliasz Sawicki","web":"http://eluss.github.io/"}},{"frontmatter":{"author_id":"fjablonski","avatar":"/images/members/filip_jablonski.jpg","bio":"Senior iOS developer","name":"Filip Jab≈Ço≈Ñski","web":null}},{"frontmatter":{"author_id":"grzesiek","avatar":"/images/members/grzegorz_ciesla.jpg","bio":"Software Developer","name":"Grzegorz Cie≈õla","web":null}},{"frontmatter":{"author_id":"ivan","avatar":"/images/members/ivan.jpg","bio":"Fullstack developer","name":"Ivan Menshykov","web":null}},{"frontmatter":{"author_id":"janek","avatar":"/images/members/janhanc.jpg","bio":"Frontend developer","name":"Jan Hanc","web":null}},{"frontmatter":{"author_id":"kwysocki","avatar":"/images/members/kamil.png","bio":"Software Engineer @ Bright Inventions","name":"Kamil Wysocki","web":"https://wysockikamil.com"}},{"frontmatter":{"author_id":"karoln","avatar":"/images/members/karol_nadratowski.jpg","bio":null,"name":"Karol Nadratowski","web":null}},{"frontmatter":{"author_id":"karol r","avatar":"/images/members/karol_rinc.jpg","bio":"Backend developer","name":"Karol Rinc","web":null}},{"frontmatter":{"author_id":"kasia","avatar":"/images/members/kasia_lukasiewicz.jpg","bio":"Senior Project Manager","name":"Kasia ≈Åukasiewicz","web":null}},{"frontmatter":{"author_id":"kasia g","avatar":"/images/members/katarzyna_galka.jpg","bio":"Project manager","name":"Katarzyna Ga≈Çka","web":null}},{"frontmatter":{"author_id":"krzysiek h","avatar":"/images/members/krzysztof_hinc.jpg","bio":"Web developer","name":"Krzysiek Hinc","web":null}},{"frontmatter":{"author_id":"krzysiek","avatar":"/images/members/krzysztof_kaczmarek.jpg","bio":"Senior iOS Developer","name":"Krzysztof Kaczmarek","web":null}},{"frontmatter":{"author_id":"maciej","avatar":"/images/members/maciej_seleman.jpg","bio":"QA Specialist","name":"Maciej Seleman","web":null}},{"frontmatter":{"author_id":"magda","avatar":"/images/members/magda_sadowska.jpg","bio":"Office & HR Assistant","name":"Magda Sadowska","web":null}},{"frontmatter":{"author_id":"maja","avatar":"/images/members/maja_puta.jpg","bio":"Junior QA Specialist","name":"Maja Puta","web":null}},{"frontmatter":{"author_id":"marcink","avatar":"/images/members/marcin_kwiatkowski.jpg","bio":null,"name":"Marcin Kwiatkowski","web":null}},{"frontmatter":{"author_id":"mateusz","avatar":"/images/members/mateusz_klimczak.jpg","bio":"Technical leader & Project manager","name":"Mateusz Klimczak","web":null}},{"frontmatter":{"author_id":"mateuszklimek","avatar":"/images/members/mateuszklimek.png","bio":"Software Engineer @ Bright Inventions","name":"Mateusz Klimek","web":null}},{"frontmatter":{"author_id":"michal k","avatar":"/images/members/michal_koszalka.jpg","bio":"Senior Backend developer","name":"Micha≈Ç Kosza≈Çka","web":null}},{"frontmatter":{"author_id":"micha≈Ç","avatar":"/images/members/michal_wrobel.jpg","bio":"Senior Backend Developer at Bright Inventions","name":"Micha≈Ç Wr√≥bel","web":null}},{"frontmatter":{"author_id":"michal","avatar":"/images/members/micha≈Ç_≈Çukasiewicz.jpg","bio":"Co-founder & Senior iOS developer","name":"Micha≈Ç ≈Åukasiewicz","web":null}},{"frontmatter":{"author_id":"monika","avatar":"/images/members/monika.jpg","bio":"Software Developer @ Bright Inventions","name":"Monika Niegrzybowska","web":null}},{"frontmatter":{"author_id":"nikodem","avatar":"/images/members/nikodem_kalinowski.jpg","bio":"Web developer","name":"Nikodem Kalinowski","web":null}},{"frontmatter":{"author_id":"patryk","avatar":"/images/members/patryk_huzarski.jpg","bio":"Software Developer @ Bright Inventions","name":"Patryk Huzarski","web":null}},{"frontmatter":{"author_id":"patryk sz","avatar":"/images/members/patryk_szlagowski.jpg","bio":"Senior Backend developer","name":"Patryk Szlagowski","web":null}},{"frontmatter":{"author_id":"pawe≈Ç","avatar":"/images/members/pawe≈Ç_gutkowski.jpg","bio":"Fullstack Developer at Bright Inventions ","name":"Pawe≈Ç Gutkowski","web":null}},{"frontmatter":{"author_id":"pawel","avatar":"/images/members/pawe≈Ç_papkiewicz.jpg","bio":"Fullstack developer","name":"Pawe≈Ç Papkiewicz","web":null}},{"frontmatter":{"author_id":"piotr","avatar":"/images/members/piotr_mionskowski.jpg","bio":"TDD fan eager to learn new things","name":"Piotr Mionskowski","web":"https://miensol.pl"}},{"frontmatter":{"author_id":"piotr_l","avatar":"/images/members/piotrl.png","bio":"Android Developer @ Bright Inventions","name":"Piotr ≈Åupi≈Ñski","web":"http://exp.flamaster2.com"}},{"frontmatter":{"author_id":"radek","avatar":"/images/members/radek_pieczaÃ®tkiewicz.jpg","bio":"Android developer","name":"Radek PieczƒÖtkiewicz","web":null}},{"frontmatter":{"author_id":"radeks","avatar":"/images/members/radoslaw.jpg","bio":"Software Engineer @ Bright Inventions","name":"Rados≈Çaw S≈Çowi≈Ñski","web":null}},{"frontmatter":{"author_id":"rafal h","avatar":"/images/members/rafal_hoffman.jpg","bio":"Fullstack developer","name":"Rafa≈Ç Hofman","web":null}},{"frontmatter":{"author_id":"sebastian","avatar":"/images/members/sebastian_sobczak.jpg","bio":"Junior Account Manager at Bright Inventions ","name":"Sebastian Sobczak","web":null}},{"frontmatter":{"author_id":"szymek","avatar":"/images/members/szymon_miloch.jpg","bio":"Android & Web developer","name":"Szymon Miloch","web":null}},{"frontmatter":{"author_id":"tomek","avatar":"/images/members/tomek.jpeg","bio":null,"name":"Tomasz Gƒôsior","web":null}},{"frontmatter":{"author_id":"ula","avatar":"/images/members/ula_stankiewicz.jpg","bio":"HR & Marketing Manager","name":"Ula Stankiewicz","web":null}},{"frontmatter":{"author_id":"wojciech","avatar":"/images/members/wojciech_baczynÃÅski.jpg","bio":"Fullstack developer","name":"Wojciech Baczy≈Ñski","web":null}},{"frontmatter":{"author_id":"lukasz","avatar":"/images/members/lukasz_reszetow.jpg","bio":"Android developer","name":"≈Åukasz Reszetow","web":null}}]},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-04-11-typescript-tips-from-kotlin-developer-const.md"}}}